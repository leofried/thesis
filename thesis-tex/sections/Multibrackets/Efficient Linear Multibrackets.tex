\sub {

    %should this say linear or proper before efficient? 
    %formalize algorithm 
    %re formalize efficiency as once you have a spot stop playing

    In the past few sections, we have looked at multibrackets (and in particular linear multibrackets) as a solution to the tournament design question of how to crown a champion as well as give out certain consolation places.

    We now consider a slightly different tournament design problem: we no longer care about which teams finish in first or any other specific place, only about which teams finish in the top-$m$ for a particular $m$. This is a problem commonly faced at regional tournaments in which the top-$m$ teams qualify for a national tournament: the ranking of the teams within the region aren't relevant, only which teams are above and below the cutoff.

    Recall the format used in the 2023 Southern Conference Wrestling Championships.

    \fig{0.75}{socon_eff}{2023 Southern Conference Wrestling Championships}

    If we were only interested in the top four teams, rather than the rank of the team within those top four slots, games $\bracklabel{C1}$ and $\bracklabel{F1}$ become unnecessary: no matter what the results of those games are, the top four teams are the same. A more efficient format would leave those games unplayed, resulting in the following format.

    \fig{0.75}{800_to_42}{An Efficient Format for Selecting a Top Four}

    Instead of being composed of four traditional brackets, the format in Figure \ref{fig:800_to_42} is composed of two semibrackets each of which have rank two: one with the $\bracklabel{A}$ and $\bracklabel{B}$ round games, and one with the $\bracklabel{C}$ and $\bracklabel{D}$ round games. And, as desired, there no games played between two teams such that both the winner and loser of each of those games are guaranteed to finish in the top four. (Nor are there any games where both the winner and loser are guaranteed bottom four)

    This format has signature $\bracksig{8;0;0}_2 \to \bracksig{4;2}_2$, and we say that it is \i{weakly efficient}.

    \begin{definition}{Weakly Efficient}{w_efficient}
        A linear multibracket is \i{weakly efficient} if there are no games played within it such that both the winner and loser of that game are guaranteed to be ranked by the format.
    \end{definition}

    Identifying whether a proper linear multibracket is weakly efficient can be done just by looking at its signature.

    \theo{}{
        A proper linear multibracket with signature $\A = \A_1 \to ... \to \A_k$ is weakly efficient if and only if there is some integer $j$ with $1 \leq j \leq k$ such that every semibracket $\A_i$ with $i < j$ is trivial and every semibracket $\A_i$ with $i > j$ is competitive.
    }{
        Assume first that some $j$ exists. Let $\bracklabel{G}$ be a game. Because all semibrackets $\A_i$ with $i<j$ are trivial, $\bracklabel{G}$ must be in a semibracket $\A_i$ for $i \geq j$, so the loser of $\bracklabel{G}$ is either eliminated outright, or falls into a semibracket $\A_i$ for $i > j,$ which is competitive, in which case they will play another game. If they continue losing, they will continue falling into competitive semibrackets, until they are eliminated outright and do not get ranked. Thus if the loser of $\G$ loses the rest of their games they will not get ranked, and so $\A$ is weakly efficient.\\

        Assume now that no such $j$ exists. Thus there must be some $i$ such that $\A_i$ is non-trivial and $\A_{i+1}$ is noncompetitive. $\A_{i+1}$ is noncompetitive, so at least one team must win $\A_{i+1}$ without playing a game. Because $\A$ is proper, this team must be a championship game loser of $\A_i$, if such a game exists. $\A_i$ is nontrivial so such a game does indeed exist: let $\bracklabel{G}$ be that game. Then the winner of $\bracklabel{G}$ wins $\A_i$, and the loser of $\bracklabel{G}$ wins $\A_{i+1}$, so $\A$ is not weakly efficient.
    }{w_efficient}

    The USA Ultimate Manual of Championship Series Tournament Formats \cite{ultimate}, which is used to determine the formats to be used at the various sectional and regional tournaments in the sport of ultimate frisbee, contains a host of weakly efficient linear multibrackets for selecting the top $m$ teams out of a list of $n$ for various values of $m$ and $n$, after a ``regular season'' portion of the tournament has been played to establish seeds.

    A couple examples are Figure \ref{fig:ult672}, which selects a top six out of seven, and \ref{fig:ult1655}, which selects a top five out of sixteen in at most five games per team. (In reality, sometimes additional games are played to determine placements within the top-$m$, but we display only the weakly efficient part of the format here.)

    \fig{0.7}{ult672}{$\bracksig{1} \to \bracksig{1} \to \bracksig{1} \to \bracksig{4;0}_2 \to \bracksig{2;0}$}
   
    \fig{0.7}{ult1655}{$\bracksig{8;0;0}_2 \to \bracksig{4;2;0}_2 \to \bracksig{8;0;2;2;0;0}$}

    We note two things about the notion of weak efficiency presented above. First, Theorem \ref{th:w_efficient} implies that a weakly efficient multibracket can begin with a long string of trivial semibrackets before the nontrivial ones begin. While this is sufficient for avoiding playing unnecessary games, it does not completely remove unnecessary semibrackets: the set of leading trivial semibrackets $$\bracksig{m_1}_{m_1} \to ... \to \bracksig{m_{j}}_{m_{j}}$$ of a weakly efficient multibracket can be combined into a single trivial semibracket $$\bracksig{m_1 + ... + m_{j}}_{(m_1 + ... + m_{j})}$$ without affecting which teams end up ranked. Applying this to the format in Figure \ref{fig:ult672} yields a signature of $$\bracksig{3}_3 \to \bracksig{4;0}_2 \to \bracksig{2;0}.$$ 
    
    In fact, if there is at least one game played in a weakly efficient multibracket, trivial semibrackets can removed entirely, converting a multibracket of signature $$\bracksig{m_1}_{m_1} \to \bracksig{a_1; ...; a_r}_{m_2} \to ... \to \A_k$$ into one of signature $$\bracksig{a_1; ...; a_r + m_1}_{m_1 + m_2} \to ... \to \A_k.$$ 
    
    Applying this to the format in Figure \ref{fig:ult672} yields a signature of $$\bracksig{4;3}_5 \to \bracksig{2;0}.$$

    To patch this, we strengthen the notion of weak efficiency into just \i{efficiency.}

    \begin{definition}{Efficient}{efficient}
        We say a proper linear multibracket is \i{efficient} if one of three conditions hold:
        \begin{enumerate}
            \item[(a)] It is a single trivial semibracket.
            \item[(b)] It is a sequence of competitive semibrackets.
            \item[(c)] It is a single nontrivial noncompetitive semibracket followed by a sequence of competitive semibrackets.
        \end{enumerate}
    \end{definition}

    Theorem \ref{th:w_efficient} says that in each of these three cases no games are played between teams guaranteed to be ranked, and the process detailed above can reduce any weakly efficient signature into a signature that takes one of those three forms.

    The second thing to note is that efficiency makes a lot of sense if we are only interested in the top-$m$ teams (where $m$ is the sum of the ranks of the semibrackets in our format) and not in the rankings of the teams within them. But sometimes we might be interested in the intermediate rankings as well. For example, let's say we want to design an eight-team tournament format in which the top team receives the grand prize, second-place receives a second-place prize, while the third- through sixth-place each get equivalent consolation prizes, and seventh and eighth each get nothing. While not efficient (or even weakly efficient), the following format assigns the desired places without playing any games between teams that are guaranteed to receive the same prize.

    \fig{0.65}{800_to_3_to_400}{$\bracksig{8;0;0;0} \to \bracksig{1} \to \bracksig{4;2}_4$}

    To account for this, we introduce the notion of a \i{prize structure}.
    
    \begin{definition}{Prize Structure}{}
        A \i{prize structure} $\PP$ is a sequence $\bracktier{p_1, ..., p_m}$ indicating that the top $p_1$ teams in a format receive some prize, the next $p_2$ receive some smaller prize, etc. Any teams finishing in place $1 + \sum_{i=1}^m p_i$ or worse receive no prize.
    \end{definition}

    Then,

    \begin{definition}{Efficient with Respect to a Prize Struture}{}
        We say a proper linear multibracket $\A = \A_1 \to ... \to \A_k$ is \i{efficient with respect to a prize structure} $\PP = \bracktier{p_1, ..., p_m}$ if
        \begin{itemize}
            \item $\A_j$ being noncompetitive implies that for some $\ell < m$, $$\sum_{i=1}^{j-1} \rank {\A_j} = \sum_{i=1}^\ell p_i,$$
                         and
            \item $\A_j$ being trivial implies that for some $\ell < m$, $$\sum_{i=1}^{j} \rank {\A_j} = \sum_{i=1}^\ell p_i.$$
        \end{itemize}
    \end{definition}

    (The first condition ensures that the format is weakly efficient with respect to the prize structure, and the second condition ensures that there are no trivial semibrackets that could be combined with another semibracket as per the process detailed before Definition \ref{def:efficient}.)

    So the proper linear multibracket $\bracksig{8;0;0;0} \to \bracksig{1} \to \bracksig{4;2}_4$ is efficient with respect to the prize structure $\bracktier{1, 1, 4}.$ A linear multibracket being efficient is the same as it being efficient with respect the prize structure $\bracktier{m},$ where $m$ is the sum of the ranks of its semibrackets.

    Efficient multibrackets are great tournament designs for tournaments whose primary goal is to select the top $m$ teams to move on to the next stage of the competitions, as discussed in the beginning of this section. They do so excitingly, with each spot in the top-$m$ being awarded as the winner of a particular game; efficiently, with no games being played between teams who will receive the same prize; and fairly, as the multibracket rules ensure that winning is always better than losing. It is not surprising that many sports with regional tournaments that qualify teams for a national one use such formats.
}